<% layout('layouts/boilerplate') %> 

 <div id="map" class="mt-0"  style="width: 100%; height: 53vh; top:auto; position:relative; left:0"></div>

    <h1 style="text-align: center; margin:1.3em">All camps!</h1>

        <% for (let i = campgrounds.length-1; i > campgrounds.length - 10; i--) { %>
            <% const num = Math.floor(Math.random() * 4) %> 
        
        <div class="card mb-3"">
            <div class="row">
                <div class="col-md-4">
                    <img src="<%= campgrounds[i].images[0] ? campgrounds[i].images[0].url : "https://res.cloudinary.com/gagagaga/image/upload/v1629204670/YelpCamp/ixonofa80id9hub3tjmf.jpg"%> " alt="" class="img-fluid">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h4 class="card-title"><%= campgrounds[i].title %></h4>
                        <p class="card-text"><%= campgrounds[i].description %></p>
                        <p class="card-text">
                            <small class="text-muted"><%= campgrounds[i].location %></small>
                        </p>
                        <a href="/campgrounds/<%= campgrounds[i]._id  %> " class="btn btn-primary">View <%= campgrounds[i].title %> </a>
                    </div>
                </div>
            </div>
        </div>

        <% } %> 

        <script>
            const mapToken = '<%-process.env.MAPBOX_TOKEN%>';  
            const campgrounds = {features: <%- JSON.stringify(campgrounds) %>};
        </script>


<script src="/javascripts/clusterMaps.js"></script>